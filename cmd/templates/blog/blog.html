{% extends 'base.html' %}

{% block app_content %}
    <div class="row">
        <div class="col-sm-3">
            <h1>{{ title }}</h1>
            <p>{{ description }}</p>
            {% if current_user.is_authenticated %}
            <p><a href="{{ url_for('blog.new_post') }}">New post.</a></p>
            {% endif %}
            <hr>

            <nav aria-label="Previous and next page navigation">
                <ul class="pagination">
                    <li class="page-item{% if not next_url %} disabled{% endif %}">
                        {% if not next_url %}<span class="page-link">Next post</span>
                        {% else %}<a class="page-link" href="{{ next_url }}">Next post</a>{% endif %}
                    </li>
                    <li class="page-item{% if not prev_url %} disabled{% endif %}">
                        {% if not prev_url %}<span class="page-link">Previous post</span>
                        {% else %}<a class="page-link" href="{{ prev_url }}">Previous post</a>{% endif %}
                    </li>
                </ul>
            </nav>
            {% if g.post_list %}
            <h4>Past posts</h4>
            <div class="list-group">
                {% for p in g.post_list %}
                <a href="{{ url_for('blog.main', post=p.id) }}" class="list-group-item">{{ p.title }}</a>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    
        <div class="col-sm-9">
            {% if post %}
            <h1>
                {{ post.title }}
                {% if current_user.is_authenticated %}
                    {% if post.public %}<span class="label label-success">Public</span>
                    {% else %}<span class="label label-danger">Not public</span>
                    {% endif %}
                {% endif %}
                <br>
                <small class="text-muted">
                    Posted by 
                    {% if post.author.first_name and post.author.last_name %}
                    {{ post.author.first_name + ' ' + post.author.last_name }} 
                    {% else %}
                    {{ post.author.username }} 
                    {% endif %}
                    on {{ moment(post.timestamp).format('LL') }} 
                    {% if current_user.is_authenticated %}
                    <a href="{{ url_for('blog.new_post', post_id=post.id) }}">Edit</a>
                    {% endif %}
                </small>
            </h1>
            <p>
                {{ post.body|safe }}
            </p>
            {% else %}
            <p>No post to show.</p>
            {% endif %}
        </div>
    </div>

{% endblock %}